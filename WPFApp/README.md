Keyword Search User Guide
=========================

In order to work, you need to suply **index** file, **label** file and *photos*.

#### Label file
By default, it has to be named *classes.labels* and placed in the folder where the the application is.
Each label must be on its own line in folowing format:

**number**\~*id*\~**name**\~*description*

where:
- **number** should be an integer under which the class is identified in the index file
- *id* is a string, not relevant
- **name** is unique string used in a search box (should not contain `+` or `*`)
- *description* is used in suggestions to give some context to the class name


Run `generate_label_file.sh` to see an example.

#### Index file
By default, it has to be named *files.index* and placed in the folder where the the application is.

File's format:

	  0: 4B 53 20 49 4E 44 45 58 ('KS INDEX' in ASCII)
	  8: FF FF FF FF FF FF FF FF
	 16: table
	  X: FF FF FF FF FF FF FF FF
	X+8: (multiple) ids of class at offset X+8
	  Y: FF FF FF FF FF FF FF FF
	Y+8: similarly as at offset X+8 and Y till the end

Table's format:

	  T: unsigned 32 bit integer - class id (as in the label file)
	T+4: unsigned 32 bit integer - offset of the first file in this class

Id's format:

	  I: unsigned 32 bit integer - photo id
	I+4: float - probability the photo is in this class

Run `python generate_index_file.py` to see an example.
 
#### Photos
By default, they have to be in folder *images* at a location of the application.
The name of the photo must be `photo_id.jpg` where `photo_id` is from the *index* file.

---

### Example

In an example generated by `generate_label_file.sh` and `generate_index_file.py` you can use these labels as long as you add an `images` folder and fill it with photos named `1.jpg` through `9.jpg`:

- road, route *(id: 3979)*
- sand *(id: 6624)*
- street *(id: 4397)*
- tree *(id: 6605)*

---

### Usage

The only user interaction is through the search box.
User can only type in class **name** (as is in the label file), `+` (union) or `*` (intersection).

When only a class name is typed, it shall return images of the given class (if any exist).

When `+` operator is typed, two surrounging classes are joined and displayed as it was one larger class (adding probabilities if a picture belongs to both of them).

When `*` operator is typed, only photos in both surrounding classes are in the result (multipliing their probabilities).

`+` and `*` can be freely combined, but `+` has greater priority meaning the union is done always before intersection.
